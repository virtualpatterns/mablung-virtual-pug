{"version":3,"sources":["../../../source/library/node/each-node.js"],"names":["BlockNode","Node","EachNode","constructor","node","option","getSource","source","blockNode","_node","block","_option","blockSource","isEmpty","__forEach","isCalled","obj","val","key","alternate","alternateNode","alternateSource","value","fn","Array","isArray","forEach","length","entry","Object","entries","name"],"mappings":";AACA,OAAOA,SAAP,MAAsB,iBAAtB;AACA,OAAOC,IAAP,MAAiB,YAAjB;;AAEA,MAAMC,QAAN,SAAuBD,IAAvB,CAA4B;;AAE1BE,EAAAA,WAAW,CAACC,IAAD,EAAOC,MAAP,EAAe;AACxB,UAAMD,IAAN,EAAYC,MAAZ;AACD;;AAED,QAAMC,SAAN,GAAkB;;AAEhB,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIC,SAAS,GAAG,IAAIR,SAAJ,CAAc,KAAKS,KAAL,CAAWC,KAAzB,EAAgC,KAAKC,OAArC,CAAhB;AACA,QAAIC,WAAW,GAAGJ,SAAS,CAACK,OAAV,GAAoB,EAApB,GAAyB,MAAML,SAAS,CAACF,SAAV,EAAjD;;AAEAJ,IAAAA,QAAQ,CAACY,SAAT,CAAmBC,QAAnB,GAA8B,IAA9B;;AAEAR,IAAAA,MAAM,GAAK,cAAa,KAAKE,KAAL,CAAWO,GAAI,MAAK,KAAKP,KAAL,CAAWQ,GAAI,GAAE,KAAKR,KAAL,CAAWS,GAAX,GAAkB,KAAI,KAAKT,KAAL,CAAWS,GAAI,EAArC,GAAyC,EAAG;AAC7G,oBAAoBN,WAAY;AAChC,mBAFI;;AAIA,QAAI,KAAKH,KAAL,CAAWU,SAAf,EAA0B;;AAExB,UAAIC,aAAa,GAAG,IAAIpB,SAAJ,CAAc,KAAKS,KAAL,CAAWU,SAAzB,EAAoC,KAAKR,OAAzC,CAApB;AACA,UAAIU,eAAe,GAAGD,aAAa,CAACP,OAAd,GAAwB,EAAxB,GAA6B,MAAMO,aAAa,CAACd,SAAd,EAAzD;;AAEAC,MAAAA,MAAM,GAAK,QAAOA,MAAO;AAC/B,sBAAsBc,eAAgB;AACtC,oBAFM;;AAID;;AAED,WAAOd,MAAP;;AAED;;AAED;AACA,SAAOO,SAAP,CAAiBQ,KAAjB,EAAwBC,EAAxB,EAA4B;;AAE1B,QAAIC,KAAK,CAACC,OAAN,CAAcH,KAAd,CAAJ,EAA0B;;AAExBA,MAAAA,KAAK,CAACI,OAAN,CAAcH,EAAd;AACA,aAAOD,KAAK,CAACK,MAAb;;AAED,KALD,MAKO;;AAEL,UAAIC,KAAK,GAAGC,MAAM,CAACC,OAAP,CAAeR,KAAf,CAAZ;;AAEAM,MAAAA,KAAK,CAACF,OAAN,CAAc,CAAC,CAAEK,IAAF,EAAQT,KAAR,CAAD,KAAqBC,EAAE,CAACD,KAAD,EAAQS,IAAR,CAArC;AACA,aAAOH,KAAK,CAACD,MAAb;;AAED;;AAEF,GAnDyB;;;;AAuD5B,eAAezB,QAAf","sourcesContent":["\nimport BlockNode from './block-node.js'\nimport Node from '../node.js'\n\nclass EachNode extends Node {\n\n  constructor(node, option) {\n    super(node, option)\n  }\n\n  async getSource() {\n\n    let source = null\n\n    let blockNode = new BlockNode(this._node.block, this._option)\n    let blockSource = blockNode.isEmpty ? '' : await blockNode.getSource()\n\n    EachNode.__forEach.isCalled = true\n    \n    source =  ` __forEach(${this._node.obj}, (${this._node.val}${this._node.key ? `, ${this._node.key}` : ''}) => { \n                  ${blockSource}\n                })`\n\n    if (this._node.alternate) {\n\n      let alternateNode = new BlockNode(this._node.alternate, this._option)\n      let alternateSource = alternateNode.isEmpty ? '' : await alternateNode.getSource()\n  \n      source =  ` if (${source} <= 0) {\n                    ${alternateSource}\n                  }`\n\n    }\n\n    return source\n\n  }\n\n  /* c8 ignore next 17 */\n  static __forEach(value, fn) {\n                \n    if (Array.isArray(value)) {\n\n      value.forEach(fn)\n      return value.length\n\n    } else {\n\n      let entry = Object.entries(value)\n\n      entry.forEach(([ name, value ]) => fn(value, name))\n      return entry.length\n\n    }\n\n  }\n\n}\n\nexport default EachNode"],"file":"each-node.js"}