{"version":3,"sources":["../../../source/test/library/transform.test.js"],"names":["Path","Test","CreateNode","_ConvertToNode","VirtualNode","VirtualText","Transform","UnsupportedAttributeTransformError","UnsupportedCodeTransformError","UnsupportedCommentTransformError","UnsupportedDocTypeTransformError","UnsupportedTagTransformError","FilePath","_URL","fileURLToPath","import","meta","url","FolderPath","dirname","Require","_createRequire","ConvertToNode","test","notThrowsAsync","getASTFromPath","resolve","getSourceFromPath","getFunctionSourceFromPath","module","createModuleFromPath","virtualFn","default","notThrows","forEach","path","relative","throwsAsync","getFunctionFromPath"],"mappings":"gFAAA,OAAOA,IAAP,MAAiB,MAAjB;AACA,OAAOC,IAAP,MAAiB,KAAjB;;AAEA,OAAOC,UAAP,MAAuB,kBAAvB;;AAEA,OAAOC,cAAP,MAA2B,cAA3B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,WAAP,MAAwB,4BAAxB;;AAEA,SAASC,SAAT,QAA0B,gBAA1B;;AAEA,SAASC,kCAAT,QAAmD,gBAAnD;AACA,SAASC,6BAAT,QAA8C,gBAA9C;AACA,SAASC,gCAAT,QAAiD,gBAAjD;AACA,SAASC,gCAAT,QAAiD,gBAAjD;AACA,SAASC,4BAAT,QAA6C,gBAA7C;;AAEA,MAAMC,QAAQ,GAjBdC,IAAI,CAACC,aAAL,CAAmBC,MAAM,CAACC,IAAP,CAAYC,GAA/B,CAiBA;AACA,MAAMC,UAAU,GAAGlB,IAAI,CAACmB,OAAL,CAAaP,QAAb,CAAnB;AACA,MAAMQ,OAAO,GAnBbC,cAAc,CAACN,MAAM,CAACC,IAAP,CAAYC,GAAb,CAmBd;;AAEA,MAAMK,aAAa,GAAGnB,cAAc,CAAC,EAAE,SAASC,WAAX,EAAwB,SAASC,WAAjC,EAAD,CAApC;;AAEAJ,IAAI,CAAC,sBAAD,EAAyB,MAAOsB,IAAP,IAAgB;AAC3C,QAAMA,IAAI,CAACC,cAAL,CAAoBlB,SAAS,CAACmB,cAAV,CAAyBL,OAAO,CAACM,OAAR,CAAgB,2BAAhB,CAAzB,CAApB,CAAN;AACD,CAFG,CAAJ;;AAIAzB,IAAI,CAAC,yBAAD,EAA4B,MAAOsB,IAAP,IAAgB;AAC9C,QAAMA,IAAI,CAACC,cAAL,CAAoBlB,SAAS,CAACqB,iBAAV,CAA4BP,OAAO,CAACM,OAAR,CAAgB,2BAAhB,CAA5B,CAApB,CAAN;AACD,CAFG,CAAJ;;AAIAzB,IAAI,CAAC,iCAAD,EAAoC,MAAOsB,IAAP,IAAgB;AACtD,QAAMA,IAAI,CAACC,cAAL,CAAoBlB,SAAS,CAACsB,yBAAV,CAAoCR,OAAO,CAACM,OAAR,CAAgB,2BAAhB,CAApC,CAApB,CAAN;AACD,CAFG,CAAJ;;AAIAzB,IAAI,CAAC,4BAAD,EAA+B,MAAOsB,IAAP,IAAgB;;AAEjD,MAAIM,MAAM,GAAG,MAAMvB,SAAS,CAACwB,oBAAV,CAA+BV,OAAO,CAACM,OAAR,CAAgB,2BAAhB,CAA/B,CAAnB;AACA,MAAIK,SAAS,GAAGF,MAAM,CAACG,OAAvB;;AAEAT,EAAAA,IAAI,CAACU,SAAL,CAAe,MAAMF,SAAS,EAA9B;;AAED,CAPG;;AASJ;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AAtBA;AAwBC;AACCX,OAAO,CAACM,OAAR,CAAgB,0DAAhB,CADD;AAECQ,OAFD,CAEUC,IAAD,IAAU;;AAElBlC,EAAAA,IAAI,CAAE,wBAAuBD,IAAI,CAACoC,QAAL,CAAe,GAAElB,UAAW,qBAA5B,EAAkDiB,IAAlD,CAAwD,8CAAjF,EAAgI,MAAOZ,IAAP,IAAgB;AAClJ,UAAMA,IAAI,CAACc,WAAL,CAAiB/B,SAAS,CAACgC,mBAAV,CAA8BH,IAA9B,CAAjB,EAAsD,EAAE,cAAc5B,kCAAhB,EAAtD,CAAN;AACD,GAFG,CAAJ;;AAID,CARA;;AAUA;AACCa,OAAO,CAACM,OAAR,CAAgB,wDAAhB,CADD;AAECN,OAAO,CAACM,OAAR,CAAgB,+DAAhB,CAFD;AAGCQ,OAHD,CAGUC,IAAD,IAAU;;AAElBlC,EAAAA,IAAI,CAAE,wBAAuBD,IAAI,CAACoC,QAAL,CAAe,GAAElB,UAAW,qBAA5B,EAAkDiB,IAAlD,CAAwD,yCAAjF,EAA2H,MAAOZ,IAAP,IAAgB;AAC7I,UAAMA,IAAI,CAACc,WAAL,CAAiB/B,SAAS,CAACgC,mBAAV,CAA8BH,IAA9B,CAAjB,EAAsD,EAAE,cAAc3B,6BAAhB,EAAtD,CAAN;AACD,GAFG,CAAJ;;AAID,CATA;;AAWA;AACCY,OAAO,CAACM,OAAR,CAAgB,sDAAhB,CADD;AAECN,OAAO,CAACM,OAAR,CAAgB,4DAAhB,CAFD;AAGCQ,OAHD,CAGUC,IAAD,IAAU;;AAElBlC,EAAAA,IAAI,CAAE,wBAAuBD,IAAI,CAACoC,QAAL,CAAe,GAAElB,UAAW,qBAA5B,EAAkDiB,IAAlD,CAAwD,4CAAjF,EAA8H,MAAOZ,IAAP,IAAgB;AAChJ,UAAMA,IAAI,CAACc,WAAL,CAAiB/B,SAAS,CAACgC,mBAAV,CAA8BH,IAA9B,CAAjB,EAAsD,EAAE,cAAc1B,gCAAhB,EAAtD,CAAN;AACD,GAFG,CAAJ;;AAID,CATA;;AAWA;AACCW,OAAO,CAACM,OAAR,CAAgB,6CAAhB,CADD;AAECQ,OAFD,CAEUC,IAAD,IAAU;;AAElBlC,EAAAA,IAAI,CAAE,wBAAuBD,IAAI,CAACoC,QAAL,CAAe,GAAElB,UAAW,qBAA5B,EAAkDiB,IAAlD,CAAwD,4CAAjF,EAA8H,MAAOZ,IAAP,IAAgB;AAChJ,UAAMA,IAAI,CAACc,WAAL,CAAiB/B,SAAS,CAACgC,mBAAV,CAA8BH,IAA9B,CAAjB,EAAsD,EAAE,cAAczB,gCAAhB,EAAtD,CAAN;AACD,GAFG,CAAJ;;AAID,CARA;;AAUA;AACCU,OAAO,CAACM,OAAR,CAAgB,kDAAhB,CADD;AAECQ,OAFD,CAEUC,IAAD,IAAU;;AAElBlC,EAAAA,IAAI,CAAE,wBAAuBD,IAAI,CAACoC,QAAL,CAAe,GAAElB,UAAW,qBAA5B,EAAkDiB,IAAlD,CAAwD,wCAAjF,EAA0H,MAAOZ,IAAP,IAAgB;AAC5I,UAAMA,IAAI,CAACc,WAAL,CAAiB/B,SAAS,CAACgC,mBAAV,CAA8BH,IAA9B,CAAjB,EAAsD,EAAE,cAAcxB,4BAAhB,EAAtD,CAAN;AACD,GAFG,CAAJ;;AAID,CARA;;AAUD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","sourcesContent":["import Path from 'path'\nimport Test from 'ava'\n\nimport CreateNode from 'virtual-dom/h.js'\n\nimport _ConvertToNode from 'html-to-vdom'\nimport VirtualNode from 'virtual-dom/vnode/vnode.js'\nimport VirtualText from 'virtual-dom/vnode/vtext.js'\n\nimport { Transform } from '../../index.js'\n\nimport { UnsupportedAttributeTransformError } from '../../index.js'\nimport { UnsupportedCodeTransformError } from '../../index.js'\nimport { UnsupportedCommentTransformError } from '../../index.js'\nimport { UnsupportedDocTypeTransformError } from '../../index.js'\nimport { UnsupportedTagTransformError } from '../../index.js'\n\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\nconst Require = __require\n\nconst ConvertToNode = _ConvertToNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n\nTest('getASTFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getASTFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getFunctionSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getFunctionSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('createModuleFromPath(path)', async (test) => {\n\n  let module = await Transform.createModuleFromPath(Require.resolve('./resource/00-default.pug'))\n  let virtualFn = module.default\n\n  test.notThrows(() => virtualFn())\n\n})\n\n// ;[ \n//   Require.resolve('./resource/transform/attribute/12-class-literal-classname.pug')\n// ].forEach((path) => {\n\n//   Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') includes 'className'`, async (test) => {\n\n//     let virtualFn = await Transform.getFunctionFromPath(path)\n//     let virtualNode = virtualFn({}, { 'createNode': CreateNode, 'convertToNode': ConvertToNode })[0]\n  \n//     test.true('className' in virtualNode.properties)\n  \n//   })\n    \n// })\n\n;[ \n  Require.resolve('./resource/transform/attribute/07-escaped-attributes.pug') \n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedAttributeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedAttributeTransformError })\n  })\n  \n})\n\n;[ \n  Require.resolve('./resource/transform/code/04-escaped-buffered-code.pug'),\n  Require.resolve('./resource/transform/code/05-escaped-buffered-inline-code.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCodeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCodeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/comment/00-default-buffered.pug'),\n  Require.resolve('./resource/transform/comment/02-block-buffered-comment.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCommentTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCommentTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/doctype/00-default.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedDocTypeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedDocTypeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/tag/02-self-closing-tag.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedTagTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedTagTransformError })\n  })\n\n})\n\n// This had already existed in scenario.test\n// ;[ \n//   Require.resolve('./resource/transform/text/01-literal-html.only.pug')\n// ].forEach((path) => {\n\n//   Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}')(...) throws TypeError`, async (test) => {\n//     await test.throwsAsync(Transform.getFunctionFromPath(path).then((virtualFn) => virtualFn({}, { 'createNode': CreateNode, 'convertToNode': ConvertToNode })), { 'instanceOf': TypeError })\n//   })\n\n// })\n"],"file":"transform.test.js"}