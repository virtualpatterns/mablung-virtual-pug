{"version":3,"sources":["../../../source/test/library/transform.test.js"],"names":["Path","Test","Transform","UnsupportedAttributeTransformError","UnsupportedCodeTransformError","UnsupportedCommentTransformError","UnsupportedDocTypeTransformError","UnsupportedTagTransformError","FilePath","_URL","fileURLToPath","import","meta","url","FolderPath","dirname","Require","_createRequire","test","notThrowsAsync","getASTFromPath","resolve","getSourceFromPath","getFunctionSourceFromPath","module","createModuleFromPath","virtualFn","default","notThrows","forEach","path","relative","throwsAsync","getFunctionFromPath"],"mappings":"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","sourcesContent":["import Path from 'path'\nimport Test from 'ava'\n\n// import CreateNode from 'virtual-dom/h.js'\n\n// import _ConvertToNode from 'html-to-vdom'\n// import VirtualNode from 'virtual-dom/vnode/vnode.js'\n// import VirtualText from 'virtual-dom/vnode/vtext.js'\n\nimport { Transform } from '../../index.js'\n\nimport { UnsupportedAttributeTransformError } from '../../index.js'\nimport { UnsupportedCodeTransformError } from '../../index.js'\nimport { UnsupportedCommentTransformError } from '../../index.js'\nimport { UnsupportedDocTypeTransformError } from '../../index.js'\nimport { UnsupportedTagTransformError } from '../../index.js'\n\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\nconst Require = __require\n\n// const ConvertToNode = _ConvertToNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n\nTest('getASTFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getASTFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getFunctionSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getFunctionSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('createModuleFromPath(path)', async (test) => {\n\n  let module = await Transform.createModuleFromPath(Require.resolve('./resource/00-default.pug'))\n  let virtualFn = module.default\n\n  test.notThrows(() => virtualFn())\n\n})\n\n;[ \n  Require.resolve('./resource/transform/attribute/07-escaped-attributes.pug') \n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedAttributeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedAttributeTransformError })\n  })\n  \n})\n\n;[ \n  Require.resolve('./resource/transform/code/04-escaped-buffered-code.pug'),\n  Require.resolve('./resource/transform/code/05-escaped-buffered-inline-code.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCodeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCodeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/comment/00-default-buffered.pug'),\n  Require.resolve('./resource/transform/comment/02-block-buffered-comment.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCommentTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCommentTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/doctype/00-default.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedDocTypeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedDocTypeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/tag/02-self-closing-tag.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedTagTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedTagTransformError })\n  })\n\n})\n\n// This had already existed in scenario.test\n// ;[ \n//   Require.resolve('./resource/transform/text/01-literal-html.only.pug')\n// ].forEach((path) => {\n\n//   Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}')(...) throws TypeError`, async (test) => {\n//     await test.throwsAsync(Transform.getFunctionFromPath(path).then((virtualFn) => virtualFn({}, { 'createNode': CreateNode, 'convertToNode': ConvertToNode })), { 'instanceOf': TypeError })\n//   })\n\n// })\n"],"file":"transform.test.js"}