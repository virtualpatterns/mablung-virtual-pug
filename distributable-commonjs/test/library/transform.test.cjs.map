{"version":3,"sources":["../../../source/test/library/transform.test.js"],"names":["FilePath","__filename","FolderPath","Path","dirname","Require","require","ConvertToNode","VirtualNode","VirtualText","test","notThrowsAsync","Transform","getASTFromPath","resolve","getSourceFromPath","getFunctionSourceFromPath","module","createModuleFromPath","virtualFn","default","notThrows","forEach","path","relative","getFunctionFromPath","virtualNode","CreateNode","true","properties","throwsAsync","UnsupportedAttributeTransformError","UnsupportedCodeTransformError","UnsupportedCommentTransformError","UnsupportedDocTypeTransformError","UnsupportedTagTransformError"],"mappings":"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","sourcesContent":["import Path from 'path'\nimport Test from 'ava'\n\nimport CreateNode from 'virtual-dom/h.js'\n\nimport _ConvertToNode from 'html-to-vdom'\nimport VirtualNode from 'virtual-dom/vnode/vnode.js'\nimport VirtualText from 'virtual-dom/vnode/vtext.js'\n\nimport { Transform } from '../../index.js'\n\nimport { UnsupportedAttributeTransformError } from '../../index.js'\nimport { UnsupportedCodeTransformError } from '../../index.js'\nimport { UnsupportedCommentTransformError } from '../../index.js'\nimport { UnsupportedDocTypeTransformError } from '../../index.js'\nimport { UnsupportedTagTransformError } from '../../index.js'\n\nconst FilePath = __filePath\nconst FolderPath = Path.dirname(FilePath)\nconst Require = __require\n\nconst ConvertToNode = _ConvertToNode({ 'VNode': VirtualNode, 'VText': VirtualText })\n\nTest('getASTFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getASTFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('getFunctionSourceFromPath(path)', async (test) => {\n  await test.notThrowsAsync(Transform.getFunctionSourceFromPath(Require.resolve('./resource/00-default.pug')))\n})\n\nTest('createModuleFromPath(path)', async (test) => {\n\n  let module = await Transform.createModuleFromPath(Require.resolve('./resource/00-default.pug'))\n  let virtualFn = module.default\n\n  test.notThrows(() => virtualFn())\n\n})\n\n;[ \n  Require.resolve('./resource/transform/attribute/12-class-literal-classname.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') creates 'className'`, async (test) => {\n\n    let virtualFn = await Transform.getFunctionFromPath(path)\n    let virtualNode = virtualFn({}, { 'createNode': CreateNode, 'convertToNode': ConvertToNode })[0]\n  \n    test.true('className' in virtualNode.properties)\n  \n  })\n    \n})\n\n\n;[ \n  Require.resolve('./resource/transform/attribute/07-escaped-attributes.pug') \n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedAttributeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedAttributeTransformError })\n  })\n  \n})\n\n;[ \n  Require.resolve('./resource/transform/code/04-escaped-buffered-code.pug'),\n  Require.resolve('./resource/transform/code/05-escaped-buffered-inline-code.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCodeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCodeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/comment/00-default-buffered.pug'),\n  Require.resolve('./resource/transform/comment/02-block-buffered-comment.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedCommentTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedCommentTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/doctype/00-default.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedDocTypeTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedDocTypeTransformError })\n  })\n\n})\n\n;[ \n  Require.resolve('./resource/transform/tag/02-self-closing-tag.pug')\n].forEach((path) => {\n\n  Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}') throws UnsupportedTagTransformError`, async (test) => {\n    await test.throwsAsync(Transform.getFunctionFromPath(path), { 'instanceOf': UnsupportedTagTransformError })\n  })\n\n})\n\n// This had already existed in scenario.test\n// ;[ \n//   Require.resolve('./resource/transform/text/01-literal-html.only.pug')\n// ].forEach((path) => {\n\n//   Test(`getFunctionFromPath('${Path.relative(`${FolderPath}/resource/transform`, path)}')(...) throws TypeError`, async (test) => {\n//     await test.throwsAsync(Transform.getFunctionFromPath(path).then((virtualFn) => virtualFn({}, { 'createNode': CreateNode, 'convertToNode': ConvertToNode })), { 'instanceOf': TypeError })\n//   })\n\n// })\n"],"file":"transform.test.cjs"}